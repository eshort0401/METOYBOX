<link rel="stylesheet" href="https://pyscript.net/releases/2024.1.1/core.css" />
<link rel="stylesheet" href="/METOYBOX/_static/assets/css/base.css" />
<link rel="stylesheet" href="/METOYBOX/_static/assets/css/controls.css" />
<script type="module" src="https://pyscript.net/releases/2024.1.1/core.js"></script>

<div id="land_sea">
    <div id="loading-screen">
        <div class="spinner"></div>
        <p>Loading...</p>
        <p><small>This can take a few minutes!</small></p>
    </div>
    <div id="main-content">
        <div id="figure-output">
            <!-- Use two layers to prevent flickering in firefox -->
            <div id="land_sea-figure-output-A" class="figure-layer is-active"></div>
            <div id="land_sea-figure-output-B" class="figure-layer is-passive"></div>
        </div>
        <div id="controls"></div>
        <script src="/METOYBOX/_static/assets/js/model-controls.js"></script>
        <script>
            containerID = "land_sea";
            
            dimSliders = coreWaveSlidersDim(containerID);
            nonDimSliders = coreWaveSlidersNonDim(containerID);
            
            // Change starting values of t and alpha sliders
            dimSliders.tSlider.value = Math.PI / 2;
            dimSliders.alphaOmegaSlider.value = 0.1;
            
            // Add new sliders for L
            const LStep = 1 * stepRatio;
            const LValue = 0.1;
            const LDimValue = (LValue * NValue * HValue) / Omega;
            nonDimSliders.LSlider = createSliderRow(
                `${containerID}-L-slider`,
                `${containerID}-L-output`,
                "\\(L:\\)",
                LStep,
                1,
                LValue,
                LStep,
                "non-dimensional"
            );
            dimSliders.LDimSlider = createSliderRow(
                `${containerID}-L_dim-slider`,
                `${containerID}-L_dim-output`,
                "\\(L:\\)",
                LStep * 100e3,
                100e3,
                LDimValue,
                LStep * 100e3,
                "dimensional",
                "m"
            );
            
            coordinateToggle = createCoordinateSelectionRow(containerID);
            overlayToggle = createOverlayToggleRow(containerID);
            imshowSelection = createImshowSelectionRow(
                containerID,
                ["psi", "u", "v", "w", "Q"],
                ["\\(\\psi\\)", "\\(u\\)", "\\(v\\)", "\\(w\\)", "\\(Q\\)"]
            );
            
            // Get the relevant div container
            container = document.getElementById(`${containerID} #main-content #controls`);
            // Append all the control rows to the container
            container.append(coordinateToggle, overlayToggle, imshowSelection);
            container.append(...Object.values(nonDimSliders), ...Object.values(dimSliders));
            setupCoordinateToggle(containerID);
        </script>
        <py-script src="/METOYBOX/_static/land_sea.py" config="/METOYBOX/_static/assets/pyscript.toml"></py-script>
    </div>
</div>