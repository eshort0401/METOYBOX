<link rel="stylesheet" href="https://pyscript.net/releases/2024.1.1/core.css" />
<link rel="stylesheet" href="/_static/assets/css/base.css" />
<link rel="stylesheet" href="/_static/assets/css/controls.css" />
<script type="module" src="https://pyscript.net/releases/2024.1.1/core.js"></script>

<div id="loading-screen">
    <div class="spinner"></div>
    <p>Loading...</p>
    <p><small>This can take a few minutes!</small></p>
</div>

<div id="main-content">
    <div id="figure-output">
        <!-- Use two layers to prevent flickering in firefox -->
        <div id="figure-output-A" class="figure-layer is-active"></div>
        <div id="figure-output-B" class="figure-layer is-passive"></div>
    </div>
    <div id="controls"></div>
    <script src="/_static/assets/js/model-controls.js"></script>
    <script>
        const configs = coreWaveConfigs();
        // Add a displacement toggle checkbox row above the sliders
        const displacement_config = overlayToggleConfig();
        configs.unshift(displacement_config);
        
        // Add an imshow selection control row above the sliders
        const fields = ["psi", "u", "v", "w", "phi"]
        const labels = ["\\(\\psi\\)", "\\(u\\)", "\\(v\\)", "\\(w\\)", "\\(\\phi\\)"]
        const imshow_sel_config = imshowSelectionConfig(fields, labels);
        configs.unshift(imshow_sel_config);
        
        const kMin = 0.1
        const kMax = 5
        const kStep = (kMax - kMin) * stepRatio
        const kValue = 2 * Math.PI // Set starting horizontal wavelength to 1 non-dimensional unit
        let args = ["\\(k:\\)", "k-slider", kMin, kMax, kValue, kStep, "non-dimensional"];
        configs.push(sliderConfig(...args));
        
        const scale = Omega / (NValue * HValue)
        const kMinDim = kMin * scale
        const kMaxDim = kMax * scale
        const kStepDim = kStep * scale
        args = ["\\(k:\\)", "k_dim-slider", kMinDim, kMaxDim, kValue * scale, kStepDim, "dimensional"];
        configs.push(sliderConfig(...args));
        
        const sigmaMin = 0.1
        const sigmaMax = 5
        const sigmaStep = (sigmaMax - sigmaMin) * stepRatio
        args = ["\\(\\sigma:\\)", "sigma-slider", sigmaMin, sigmaMax, 1, sigmaStep, "non-dimensional"];
        configs.push(sliderConfig(...args));
        const sigmaMinDim = sigmaMin * Omega
        const sigmaMaxDim = sigmaMax * Omega
        const sigmaStepDim = sigmaStep * Omega
        args = ["\\(\\sigma:\\)", "sigma_dim-slider", sigmaMinDim, sigmaMaxDim, Omega, sigmaStepDim, "dimensional"];
        configs.push(sliderConfig(...args));
        createModelControls(configs, "controls");
    </script>
    <py-script src="_static/foundation_wave.py" config="_static/assets/pyscript.toml"></py-script>
</div>