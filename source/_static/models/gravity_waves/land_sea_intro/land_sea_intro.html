<div id="land_sea_intro">
    <div id="loading-screen">
        <div class="spinner"></div>
        <p>Loading...</p>
        <p><small>This can take a few minutes!</small></p>
    </div>
    <div id="main-content">
        <div id="figure-output">
            <!-- Use two layers to prevent flickering in firefox -->
            <div id="land_sea_intro-figure-output-A" class="figure-layer is-active"></div>
            <div id="land_sea_intro-figure-output-B" class="figure-layer is-passive"></div>
        </div>
        <div id="controls"></div>
        <script>
            (function(containerID) {
                // Note containerID is set by utils.py
                
                const dimSliders = coreWaveSlidersDim(containerID);
                const nonDimSliders = coreWaveSlidersNonDim(containerID);
                
                // Add new sliders for L
                nonDimSliders.LSlider = getLNonDimSlider(containerID);
                dimSliders.LDimSlider = getLDimSlider(containerID);
                
                const startingCoords = "dimensional";
                const coordToggle = createCoordinateSelectionRow(containerID, startingCoords);
                const overlayToggle = createOverlayToggleRow(containerID);
                // Note we switch off the quiver by default for the intro figure
                overlayToggle.querySelector(`#${containerID}-quiver-checkbox`).checked = false;
                // Note we change the default variable order for the intro figure to highlight Q
                const imshowSelection = createFieldSelectionRow(
                    containerID,
                    ["Q", "psi", "u", "v", "w"],
                    ["\\(Q\\)", "\\(\\psi\\)", "\\(u\\)", "\\(v\\)", "\\(w\\)"]
                );
                
                // Get the relevant div container
                const container = document.querySelector(`#${containerID} #main-content #controls`);
                // Append all the control rows to the container
                container.append(coordToggle, overlayToggle, imshowSelection);
                container.append(...Object.values(nonDimSliders), ...Object.values(dimSliders));
                setupCoordinateToggle(containerID, startingCoords);
            })('land_sea_intro');
        </script>
        <py-script 
            src="/METOYBOX/_static/models/gravity_waves/land_sea_intro/land_sea_intro.py" 
            config="/METOYBOX/_static/assets/pyscript.toml"
            data-container-id="land_sea_intro">
        </py-script>
    </div>
</div>